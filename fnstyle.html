<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>飞牛桌面管理 - 个性化定制</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link href="fonts/font-awesome.min.css" rel="stylesheet">
    <style>
        /* 深色科技风格颜色变量 */
        :root {
            --primary: #00a8ff;
            --secondary: #00d2d3;
            --accent: #5f27cd;
            --success: #10ac84;
            --danger: #ee5a24;
            --warning: #feca57;
            --info: #3498db;
            --dark-bg: #0f172a;
            --card-bg: #1e293b;
            --card-hover: #273449;
            --border-color: #334155;
            --text-primary: #e2e8f0;
            --text-secondary: #94a3b8;
            --shadow-color: rgba(0, 0, 0, 0.3);
            --glow-primary: 0 0 10px rgba(0, 168, 255, 0.5);
            --glow-secondary: 0 0 15px rgba(0, 210, 211, 0.3);
        }
        
        /* 基础样式重置 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html {
            height: 100%;
            scroll-behavior: smooth;
        }
        
        body {
            font-family: 'Rajdhani', 'Segoe UI', 'Roboto', sans-serif;
            background-color: var(--dark-bg);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(15, 23, 42, 0.95) 0%, rgba(15, 23, 42, 1) 90%),
                linear-gradient(to right, rgba(0, 168, 255, 0.03), transparent, rgba(0, 210, 211, 0.03));
            position: relative;
            overflow-x: hidden;
        }
        
        /* 主容器 */
        .container {
            width: 100%;
            max-width: 1024px;
            margin: 0 auto;
            padding: 0.5rem 0.5rem;
        }
        
        /* 导航栏样式 */
        .navbar {
            background: linear-gradient(90deg, var(--card-bg), var(--dark-bg));
            border-bottom: 1px solid var(--border-color);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
        }
        
        .navbar-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            max-width: 1024px;
            margin: 0 auto;
            padding: 0 1.5rem;
        }
        
        .navbar-actions {
            display: flex;
            gap: 0.5rem; /* 控制按钮之间的间距 */
        }
        
        .navbar-title {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        
        .navbar-title-main {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary);
            text-shadow: var(--glow-primary);
        }
        
        .navbar-title-sub {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-top: 0.25rem;
        }
        
        /* 预览图容器样式 */
        .preview-img-container {
            transition: all 0.3s ease !important;
            position: relative;
            z-index: 10;
        }
        
        .preview-img-container:hover {
            width: auto !important;
            height: 160px !important;
            z-index: 1000 !important;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        
        .preview-img-container:hover img {
            object-fit: contain !important;
            width: auto !important;
            height: 100% !important;
        }
        
        /* 内容卡片 */
        .content-card {
            background: var(--card-bg);
            border-radius: 1rem;
            padding: 1rem;
            margin-top: 0.6rem;
            box-shadow: 0 8px 32px var(--shadow-color);
            border: 1px solid var(--border-color);
        }
        
        .content-card h2 {
            color: var(--primary);
            margin-bottom: 1rem;
            font-size: 1.75rem;
            text-shadow: var(--glow-primary);
        }
        
        /* 表单样式 */
        .form-group {
            margin-bottom: 0.8rem;
            padding: 0.5rem;
            background-color: rgba(255, 255, 255, 0.03);
            border-radius: 0.5rem;
            border: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            flex-wrap: nowrap;
            gap: 0.5rem;
            overflow-x: auto;
            min-height: 45px;
        }
        
        /* 两列布局 */
        .form-group.two-column {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .form-column {
            flex: 1;
            min-width: 180px;
            display: flex;
            align-items: center;
            flex-wrap: nowrap;
            gap: 0.5rem;
        }
        
        /* 表单项目布局 */
        .form-group,
        .form-column {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .form-group label,
        .form-column label {
            display: inline-block;
            min-width: 60px;
            font-weight: 600;
            color: var(--text-primary);
            text-align: left;
            flex-shrink: 0;
        }
        
        /* 输入框容器 */
        .input-container {
            flex: 1;
            min-width: 0;
        }
        
        .form-group input[type="text"] {
            width: 100%;
            min-width: 0;
            padding: 0.5rem 0.8rem;
            background-color: var(--dark-bg);
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            color: var(--text-primary);
            font-size: 0.9rem;
            vertical-align: middle;
        }
        
        .form-group input[type="text"]:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(0, 168, 255, 0.1);
        }
        
        /* 按钮样式 */
        .btn {
            min-width: 60px;
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 0.5rem;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
            vertical-align: middle;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            box-shadow: var(--glow-primary);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 168, 255, 0.4);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, var(--card-bg), var(--dark-bg));
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }
        
        .btn-secondary:hover {
            border-color: var(--primary);
            color: var(--primary);
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        /* 隐藏文件输入 */
        input[type="file"] {
            display: none;
        }
        
        /* 覆盖层用于阻止页面操作 */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
            z-index: 9998;
        }
        
        /* 状态消息弹窗 */
        .status-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 1.5rem;
            border-radius: 0.5rem;
            display: none;
            font-weight: 500;
            min-width: 300px;
            max-width: 90%;
            text-align: center;
            z-index: 9999;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }
        
        /* 进度条容器 */
        .progress-container {
            margin-top: 1rem;
            height: 6px;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            overflow: hidden;
        }
        
        /* 进度条 */
        .progress-bar {
            height: 100%;
            background-color: var(--primary);
            border-radius: 3px;
            transition: width 0.3s ease;
        }
        
        /* 循环动画进度条 */
        .progress-bar.looping {
            width: 30%;
            background: linear-gradient(90deg, var(--primary), var(--secondary), var(--primary));
            animation: progressLoop 2s ease-in-out infinite;
            background-size: 200% 100%;
        }
        
        /* 循环动画关键帧 */
        @keyframes progressLoop {
            0% {
                transform: translateX(-100%);
            }
            100% {
                transform: translateX(350%);
            }
        }
        
        .status-message.success {
            background-color: rgba(16, 172, 132, 0.95);
            color: white;
            border: none;
        }
        
        .status-message.error {
            background-color: rgba(238, 90, 36, 0.95);
            color: white;
            border: none;
        }
        
        .status-message.info {
            background-color: rgba(52, 152, 219, 0.95);
            color: white;
            border: none;
        }
        
        /* 返回按钮 */
        .back-btn {
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .back-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
        }
        
        /* 响应式设计 */
        @media (max-width: 720px) {
            .form-group {
                flex-wrap: wrap;
                min-height: auto;
            }
            
            .form-group label {
                width: 100%;
                margin-bottom: 0.5rem;
                text-align: left;
            }
            
            .form-group input[type="text"] {
                width: 100%;
                margin-bottom: 1rem;
            }
            
            .btn {
                width: 100%;
                margin-bottom: 0.5rem;
            }
            
            .form-group.two-column {
                flex-direction: column;
                gap: 1rem;
            }
            
            .form-column {
                width: 100%;
                flex-direction: column;
                align-items: flex-start;
            }
            
            /* 预览图容器样式 */
            .preview-img-container {
                transition: all 0.3s ease;
                position: relative;
                z-index: 10;
            }
            .preview-img-container:hover {
                width: 160px !important;
                height: 120px !important;
                box-shadow: 0 2px 8px rgba(0,0,0,0.2);
                z-index: 1000 !important;
            }
            .preview-img-container img {
                transition: all 0.5s ease;
            }

        
        /* 控制标签样式 */
        .control-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.95rem;
        }
    </style>
<script>document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("applyBtn");const o=document.getElementById("applyConfigModal");const t=document.getElementById("cancelApplyBtn");const i=document.getElementById("confirmApplyBtn");if(e&&o){e.addEventListener("click",e=>{e.preventDefault();o.style.display="flex"})}if(t&&o){t.addEventListener("click",()=>{o.style.display="none"})}if(o){o.addEventListener("click",e=>{if(e.target===o){o.style.display="none"}})}if(i&&o){i.addEventListener("click",async()=>{try{o.style.display="none";await fetch("/api/update-data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:"deskdata/pw.json",update:{enabled:1}})});const e=await fetch("/api/exit",{method:"POST",headers:{"Content-Type":"application/json"}});const t=await e.json();if(t.success){showStatusMessage("success","程序将重启使其配置生效...");setTimeout(()=>{showStatusMessage("success","设置生效,重启程序...")},2600);setTimeout(()=>{showStatusMessage("success","重启完毕,重载页面...")},5200);setTimeout(()=>{window.location.reload()},7800)}else{showStatusMessage("error",t.message||"退出程序失败！")}}catch(e){console.error("应用配置出错:",e);showStatusMessage("error","应用配置失败，请重试！")}})}});function updatePreview(t,o){const i=document.getElementById(o);if(i){if(t&&(t.startsWith("http://")||t.startsWith("https://")||t.startsWith("/")||t.startsWith("data:image/"))){let e=t;if((o==="loginBackgroundPreview"||o==="desktopWallpaperPreview")&&t==="/static/bg/wallpaper-1.webp"){e="/res/tow/static/bg/wallpaper-1.webp"}else if(o==="webFaviconPreview"&&t==="/favicon.ico"){e="/res/tow/favicon.ico"}else if(o==="movieBackgroundPreview"&&t==="/v/assets/eb314afd427b95eaaa0eab022a44c1cc-CVNYCT4h.webp"){e="/trim.media/static/assets/eb314afd427b95eaaa0eab022a44c1cc-CVNYCT4h.webp"}else if(o==="movieLogoPreview"&&t==="/v/static/img/logo.png"){e="/trim.media/static/static/img/logo.png"}else if(o==="movieFaviconPreview"&&t==="/v/static/favicon.ico"){e="/trim.media/static/static/favicon.ico"}i.src=e;i.style.display="block";i.onerror=function(){this.src="";this.style.display="block";this.style.backgroundColor="#f0f0f0";this.style.backgroundImage="none"};i.onload=function(){this.style.backgroundColor="transparent"}}else{i.src="";i.style.display="block";i.style.backgroundColor="#f0f0f0"}}}document.addEventListener("DOMContentLoaded",function(){const i=getThemeConfig();const e=[{key:"loginBackground",previewId:"loginBackgroundPreview",inputId:"loginBackground"},{key:"loginLogo",previewId:"loginLogoPreview",inputId:"loginLogo"},{key:"deviceLogo",previewId:"deviceLogoPreview",inputId:"deviceLogo"},{key:"webFavicon",previewId:"webFaviconPreview",inputId:"webFavicon"},{key:"desktopWallpaper",previewId:"desktopWallpaperPreview",inputId:"desktopWallpaper"}];e.forEach(e=>{const t=document.getElementById(e.previewId);const o=document.getElementById(e.inputId);if(t&&o){t.style.display="block";if(i&&i[e.key]){t.src=i[e.key];o.value=i[e.key];t.onerror=function(){this.src="";this.style.backgroundColor="#f0f0f0"};t.onload=function(){this.style.backgroundColor="transparent"}}else{t.src="";t.style.backgroundColor="#f0f0f0"}}})})</script>
        </head>
<body>
    
    <header class="navbar">
        <div class="navbar-content">
            <div class="navbar-title">
                <div class="navbar-title-main">
                    <i class="fa fa-paint-brush"></i> 飞牛个性化定制
                </div>
                <div class="navbar-title-sub">支持使用图片API地址，保存后需要点击一次【立即生效】</div>
            </div>
            <div class="navbar-actions">
                <a href="#" id="applyBtn" class="back-btn">
                    <i class="fa fa-check-circle"></i> 立即生效
                </a>
                <a href="index.html" class="back-btn">
                    <i class="fa fa-arrow-left"></i> 返回主页
                </a>
            </div>
        </div>
    </header>

    
    <div id="applyConfigModal" class="overlay" style="display: none; justify-content: center; align-items: center;">
        <div style="background-color: var(--card-bg); border: 1px solid var(--border-color); border-radius: 0.8rem; padding: 2rem; max-width: 500px; width: 90%; box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);">
            <h3 style="color: var(--primary); margin-bottom: 1rem; text-align: center;">应用配置确认</h3>
            <p style="margin-bottom: 2rem; text-align: center; color: var(--text-secondary);">
                应用配置将重启程序以使其生效，确定要继续吗？
            </p>
            <div style="display: flex; justify-content: center; gap: 1rem;">
                <button id="cancelApplyBtn" class="btn btn-secondary">
                    取 消
                </button>
                <button id="confirmApplyBtn" class="btn btn-primary">
                    确 定
                </button>
            </div>
        </div>
    </div>

    
    <main class="container">

        
        <div class="content-card">
            <h2><i class="fa fa-id-card"></i> 登录页备案信息</h2>

            <form id="beianForm">
                
                <div style="display: flex; gap: 20px; margin-bottom: 15px;">
                    <div class="form-group" style="flex: 1;">
                        <label for="beianName" class="control-label">网站名称：</label>
                        <div class="input-container">
                            <input type="text" id="beianName" placeholder="边个嘅飞牛">
                        </div>
                    </div>
                    
                    <div class="form-group" style="flex: 1;">
                        <label for="beianUrl" class="control-label">网站链接：</label>
                        <div class="input-container">
                            <input type="text" id="beianUrl" placeholder="https://www.123.com">
                        </div>
                    </div>
                </div>
                
                
                <div style="display: flex; gap: 20px; align-items: flex-end;">
                    <div class="form-group" style="flex: 1;">
                        <label for="beianNum" class="control-label">备案号：</label>
                        <div class="input-container">
                            <input type="text" id="beianNum" placeholder="粤ICP备95279394号-1">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="beianToggle">启用备案信息：</label>
                        <div class="input-container">
                            <select id="beianToggle" style="width: 80px; padding: 0.5rem 0.8rem; background-color: var(--dark-bg); border: 1px solid var(--border-color); border-radius: 0.5rem; color: var(--text-primary); font-size: 0.9rem;">
                                <option value="0">关闭</option>
                                <option value="1">开启</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <button type="button" class="btn btn-primary" id="saveBeianBtn">
                            <i class="fa fa-check"></i> 保存备案信息
                        </button>
                    </div>
                </div>
            </form>
        </div>
        
         
        <div class="content-card">
            <h2><i class="fa fa-share-alt"></i> 外链分享设置</h2>
            
            <form id="shareCustomizeForm">
                
                <div class="form-group">
                    <div class="preview-img-container" style="display: inline-block; width: 50px; height: 40px; border: 1px solid #444; border-radius: 4px; margin-right: 8px; overflow: hidden; vertical-align: middle; position: relative; cursor: pointer;">
                        <img id="sharePcLogoPreview" src="" alt="预览" style="width: 100%; height: 100%; object-fit: cover;">
                    </div>
                    <label for="sharePcLogo" style="vertical-align: middle;">PC Web端LOGO：</label>
                    <div class="input-container">
                        <input type="text" id="sharePcLogo" placeholder="请输入LOGO图片URL">
                    </div>
                    <button type="button" class="btn btn-secondary" id="defaultSharePcLogoBtn">
                        <i class="fa fa-refresh"></i> 默认
                    </button>
                    <button type="button" class="btn btn-secondary" id="uploadSharePcLogoBtn">
                        <i class="fa fa-upload"></i> 上传
                    </button>
                    <button type="button" class="btn btn-primary" id="saveSharePcLogoBtn">
                        <i class="fa fa-check"></i>保存
                    </button>
                    <input type="file" id="sharePcLogoFile" accept="image/*" style="display: none;">
                </div>
                
                
                <div class="form-group">
                    <div class="preview-img-container" style="display: inline-block; width: 50px; height: 40px; border: 1px solid #444; border-radius: 4px; margin-right: 8px; overflow: hidden; vertical-align: middle; position: relative; cursor: pointer;">
                        <img id="shareMbLogoPreview" src="" alt="预览" style="width: 100%; height: 100%; object-fit: cover;">
                    </div>
                    <label for="shareMbLogo" style="vertical-align: middle;">移动Web端LOGO：</label>
                    <div class="input-container">
                        <input type="text" id="shareMbLogo" placeholder="请输入LOGO图片URL">
                    </div>
                    <button type="button" class="btn btn-secondary" id="defaultShareMbLogoBtn">
                        <i class="fa fa-refresh"></i> 默认
                    </button>
                    <button type="button" class="btn btn-secondary" id="uploadShareMbLogoBtn">
                        <i class="fa fa-upload"></i> 上传
                    </button>
                    <button type="button" class="btn btn-primary" id="saveShareMbLogoBtn">
                        <i class="fa fa-check"></i>保存
                    </button>
                    <input type="file" id="shareMbLogoFile" accept="image/*" style="display: none;">
                </div>
                
                
                <div class="form-group">
                    <label for="shareMbTitle">移动端Web标题：</label>
                    <div class="input-container">
                        <input type="text" id="shareMbTitle" placeholder="请输入移动Web端标题">
                    </div>
                    <button type="button" class="btn btn-secondary" id="defaultShareMbTitleBtn">
                        <i class="fa fa-refresh"></i> 默认
                    </button>
                    <button type="button" class="btn btn-primary" id="saveShareMbTitleBtn">
                        <i class="fa fa-check"></i> 保存
                    </button>
                </div>               
                    
                    <div class="form-group">
                        <label for="shareMbDesc">移动Web端描述：</label>
                        <div class="input-container">
                            <input type="text" id="shareMbDesc" placeholder="请输入移动Web端描述">
                        </div>
                        <button type="button" class="btn btn-secondary" id="defaultShareMbDescBtn">
                            <i class="fa fa-refresh"></i> 默认
                        </button>
                        <button type="button" class="btn btn-primary" id="saveShareMbDescBtn">
                            <i class="fa fa-check"></i> 保存
                        </button>
                    </div>
                    
                    <div class="form-group">
                        <label for="shareMbUrl">点击Logo跳转链接：</label>
                        <div class="input-container">
                            <input type="text" id="shareMbUrl" placeholder="请输入Logo跳转链接">
                        </div>
                        <button type="button" class="btn btn-secondary" id="defaultShareMbUrlBtn">
                            <i class="fa fa-refresh"></i> 默认
                        </button>
                        <button type="button" class="btn btn-primary" id="saveShareMbUrlBtn">
                            <i class="fa fa-check"></i> 保存
                        </button>
                    </div>
            </form>
        </div>




         
        <div class="content-card">
            <h2><i class="fa fa-sliders"></i> 飞牛个性化设置 <span style="text-shadow:none;color:rgb(202, 154, 51);float:right;font-size:13px;margin-top:20px;">⚠ 为减轻肥牛服务器压力，此项功能仅为非FN Connect连接生效</span></h2>
            
            <form id="customizeForm">
                
                <div class="form-group two-column">
                    
                    <div class="form-column">
                        <label for="appTitle">飞牛标题：</label>
                        <div class="input-container">
                        <input type="text" id="appTitle" placeholder="请输入飞牛标题">
                    </div>
                    <button type="button" class="btn btn-secondary" id="defaultTitleBtn">
                        <i class="fa fa-refresh"></i> 默认
                    </button>
                        <button type="button" class="btn btn-primary" id="saveTitleBtn">
                            <i class="fa fa-check"></i> 保存
                        </button>
                    </div>
                    
                    <div class="form-column">
                        <label for="loginOpacity">登录框透明度：</label>
                        <select id="loginOpacity" style="width: 120px; padding: 0.5rem 0.8rem; background-color: var(--dark-bg); border: 1px solid var(--border-color); border-radius: 0.5rem; color: var(--text-primary); font-size: 0.9rem;">
                            
                        </select>
                        <button type="button" class="btn btn-primary" id="saveOpacityBtn" style="display: none;">
                            <i class="fa fa-check"></i> 保存
                        </button>
                         <select id="nasNameDisplay" style="margin-left: 10px; width: 150px; padding: 0.5rem 0.8rem; background-color: var(--dark-bg); border: 1px solid var(--border-color); border-radius: 0.5rem; color: var(--text-primary); font-size: 0.9rem;" onchange="updateNasNameDisplay(this.value)">
                            <option value="1">显示登录框名字</option>
                            <option value="2">隐藏登录框名字</option>
                        </select>
                        <script>function updateNasNameDisplay(n){fetch("/api/fnstyle.json").then(e=>e.json()).then(e=>{e.nasNameDisplay=parseInt(n);return fetch("/api/fnstyle.json",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}).then(()=>{console.log("登录框名字显示设置已保存！")}).catch(e=>{console.error("保存失败:",e)})}document.addEventListener("DOMContentLoaded",function(){fetch("/api/fnstyle.json").then(e=>e.json()).then(e=>{if(e.nasNameDisplay!==undefined){document.getElementById("nasNameDisplay").value=e.nasNameDisplay.toString()}})})</script>
                    </div>
                </div>
                
                
                <div class="form-group">
                    <div class="preview-img-container" style="display: inline-block; width: 50px; height: 40px; border: 1px solid #444; border-radius: 4px; margin-right: 8px; overflow: hidden; vertical-align: middle; position: relative; cursor: pointer; transition: all 0.3s ease;">
                        <img id="loginBackgroundPreview" src="" alt="预览" style="width: 100%; height: 100%; object-fit: cover;">
                    </div>
                    <label for="loginBackground" style="vertical-align: middle;">飞牛登录背景：</label>
                    <div class="input-container">
                        <input type="text" id="loginBackground" placeholder="请输入背景图片URL">
                    </div>
                    <button type="button" class="btn btn-secondary" id="defaultBackgroundBtn">
                        <i class="fa fa-refresh"></i> 默认
                    </button>
                    <button type="button" class="btn btn-secondary" id="uploadBackgroundBtn">
                        <i class="fa fa-upload"></i> 上传
                    </button>
                    <button type="button" class="btn btn-primary" id="saveBackgroundBtn">
                        <i class="fa fa-check"></i>保存
                    </button>
                    <input type="file" id="backgroundFile" accept="image/*" style="display: none;">
                </div>
                
                
                <div class="form-group">
                    <div class="preview-img-container" style="display: inline-block; width: 50px; height: 40px; border: 1px solid #444; border-radius: 4px; margin-right: 8px; overflow: hidden; vertical-align: middle; position: relative; cursor: pointer;">
                        <img id="loginLogoPreview" src="" alt="预览" style="width: 100%; height: 100%; object-fit: cover;">
                    </div>
                    <label for="loginLogo" style="vertical-align: middle;">飞牛登录LOGO：</label>
                    <div class="input-container">
                        <input type="text" id="loginLogo" placeholder="请输入LOGO图片URL">
                    </div>
                    <button type="button" class="btn btn-secondary" id="defaultLogoBtn">
                        <i class="fa fa-refresh"></i> 默认
                    </button>
                    <button type="button" class="btn btn-secondary" id="uploadLogoBtn">
                        <i class="fa fa-upload"></i> 上传
                    </button>
                    <button type="button" class="btn btn-primary" id="saveLogoBtn">
                            <i class="fa fa-check"></i>保存
                        </button>
                    <input type="file" id="logoFile" accept="image/*" style="display: none;">
                </div>
                

                
                
                <div class="form-group">
                    <div class="preview-img-container" style="display: inline-block; width: 50px; height: 40px; border: 1px solid #444; border-radius: 4px; margin-right: 8px; overflow: hidden; vertical-align: middle; position: relative; cursor: pointer;">
                        <img id="deviceLogoPreview" src="" alt="预览" style="width: 100%; height: 100%; object-fit: cover;">
                    </div>
                    <label for="deviceLogo" style="vertical-align: middle;">飞牛设备LOGO：</label>
                    <div class="input-container">
                        <input type="text" id="deviceLogo" placeholder="请输入LOGO图片URL">
                    </div>
                    <button type="button" class="btn btn-secondary" id="defaultDeviceLogoBtn">
                        <i class="fa fa-refresh"></i> 默认
                    </button>
                    <button type="button" class="btn btn-secondary" id="uploadDeviceLogoBtn">
                        <i class="fa fa-upload"></i> 上传
                    </button>
                    <button type="button" class="btn btn-primary" id="saveDeviceLogoBtn">
                            <i class="fa fa-check"></i> 保存
                        </button>
                    <input type="file" id="deviceLogoFile" accept="image/*" style="display: none;">
                </div>
                
                
                <div class="form-group">
                    <div class="preview-img-container" style="display: inline-block; width: 50px; height: 40px; border: 1px solid #444; border-radius: 4px; margin-right: 8px; overflow: hidden; vertical-align: middle; position: relative; cursor: pointer;">
                        <img id="webFaviconPreview" src="" alt="预览" style="width: 100%; height: 100%; object-fit: cover;">
                    </div>
                    <label for="webFavicon" style="vertical-align: middle;">飞牛网页favicon图标：</label>
                    <div class="input-container">
                        <input type="text" id="webFavicon" placeholder="请输入favicon图标URL">
                    </div>
                    <button type="button" class="btn btn-secondary" id="defaultFaviconBtn">
                        <i class="fa fa-refresh"></i> 默认
                    </button>
                    <button type="button" class="btn btn-secondary" id="uploadFaviconBtn">
                        <i class="fa fa-upload"></i> 上传
                    </button>
                    <button type="button" class="btn btn-primary" id="saveFaviconBtn">
                            <i class="fa fa-check"></i> 保存
                        </button>
                    <input type="file" id="faviconFile" accept="image/x-icon,.ico,.png,.jpg" style="display: none;">
                </div>
                
                
                <div class="form-group">
                    <div class="preview-img-container" style="display: inline-block; width: 50px; height: 40px; border: 1px solid #444; border-radius: 4px; margin-right: 8px; overflow: hidden; vertical-align: middle; position: relative; cursor: pointer;">
                        <img id="desktopWallpaperPreview" src="" alt="预览" style="width: 100%; height: 100%; object-fit: cover;">
                    </div>
                    <label for="desktopWallpaper" style="vertical-align: middle;">桌面默认壁纸：</label>
                    <div class="input-container">
                        <input type="text" id="desktopWallpaper" placeholder="虽然肥牛自带此功能，但这里可以用图片API并且强制替换">
                    </div>
                    <button type="button" class="btn btn-secondary" id="defaultWallpaperBtn">
                        <i class="fa fa-refresh"></i> 默认
                    </button>
                    <button type="button" class="btn btn-secondary" id="uploadWallpaperBtn">
                        <i class="fa fa-upload"></i> 上传
                    </button>
                    <button type="button" class="btn btn-primary" id="saveWallpaperBtn">
                            <i class="fa fa-check"></i> 保存
                        </button>
                    <input type="file" id="wallpaperFile" accept="image/*" style="display: none;">
                </div>
                
            </form>
        </div>
        
        
        <div class="content-card">
            <div class="card-header">
                <h2><i class="fa fa-paint-brush"></i> 一键切换预设主题 <small style="text-shadow:none;color:rgb(106, 149, 189);float:right;font-size:13px;margin-top:18px;margin-left:10px;"> (个人服务器小水管，若下载失败请再尝试)</small></h2>
                <button type="button" class="btn btn-primary" id="updateThemeBtn" style="margin-bottom: 1.1rem;">
                    <i class="fa fa-download"></i> 在线更新主题
                </button>
            </div>
            <div id="themeGrid" class="theme-grid">
                
                <div class="theme-loading">
                    <i class="fa fa-circle-o-notch fa-spin fa-2x"></i>
                    <p>加载主题中...</p>
                </div>
            </div>
        </div>
        
        
        <div class="content-card">
            <h2><i class="fa fa-film"></i> 影视个性化配置 <small style="text-shadow:none;color:rgb(92, 204, 142);font-size:13px;">注意:影视区需要更新Compose代码,请更新v0.73后重新构建!</small></h2>

            <form id="movieCustomizeForm">
                
                <div class="form-group two-column">
                    
                    <div class="form-column">
                        <label for="movieTitle">影视标题：</label>
                        <div class="input-container">
                        <input type="text" id="movieTitle" placeholder="请输入影视标题">
                         </div>
                        <button type="button" class="btn btn-secondary" id="defaultMovieTitleBtn">
                            <i class="fa fa-refresh"></i> 默认
                        </button>
                    <button type="button" class="btn btn-primary" id="saveMovieTitleBtn">
                            <i class="fa fa-check"></i> 保存
                        </button>
                    </div>
                    
                    <div class="form-column">
                        <label for="movieOpacity">登录框透明度：</label>
                        <select id="movieOpacity" style="width: 120px; padding: 0.5rem 0.8rem; background-color: var(--dark-bg); border: 1px solid var(--border-color); border-radius: 0.5rem; color: var(--text-primary); font-size: 0.9rem;">
                            
                        </select>
                        
                        <select id="moveNameDisplay" style="margin-left: 10px; width: 150px; padding: 0.5rem 0.8rem; background-color: var(--dark-bg); border: 1px solid var(--border-color); border-radius: 0.5rem; color: var(--text-primary); font-size: 0.9rem;" onchange="updateMoveNameDisplay(this.value)">
                            <option value="1">显示登录框设备名称</option>
                            <option value="2">隐藏登录框设备名称</option>
                        </select>
                        <script>function updateMoveNameDisplay(n){fetch("/api/fnstyle.json").then(e=>e.json()).then(e=>{e.moveNameDisplay=parseInt(n);return fetch("/api/fnstyle.json",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}).then(()=>{console.log("登录框设备名称显示设置已保存！")}).catch(e=>{console.error("保存失败:",e)})}document.addEventListener("DOMContentLoaded",function(){fetch("/api/fnstyle.json").then(e=>e.json()).then(e=>{if(e.moveNameDisplay!==undefined){document.getElementById("moveNameDisplay").value=e.moveNameDisplay.toString()}})})</script>
                        <button type="button" class="btn btn-primary" id="saveMovieOpacityBtn" style="display: none;">
                            <i class="fa fa-check"></i> 保存
                        </button>
                        
                    </div>
                </div>
                
                
                <div class="form-group">
                    <div class="preview-img-container" style="display: inline-block; width: 50px; height: 40px; border: 1px solid #444; border-radius: 4px; margin-right: 8px; overflow: hidden; vertical-align: middle; position: relative; cursor: pointer; transition: all 0.3s ease;">
                        <img id="movieBackgroundPreview" src="" alt="预览" style="width: 100%; height: 100%; object-fit: cover;">
                    </div>
                    <label for="movieBackground" style="vertical-align: middle;">影视背景：</label>
                    <div class="input-container">
                        <input type="text" id="movieBackground" placeholder="请输入背景图片URL">
                    </div>
                    <button type="button" class="btn btn-secondary" id="defaultMovieBackgroundBtn">
                        <i class="fa fa-refresh"></i> 默认
                    </button>
                    <button type="button" class="btn btn-secondary" id="uploadMovieBackgroundBtn">
                        <i class="fa fa-upload"></i> 上传
                    </button>
                    <button type="button" class="btn btn-primary" id="saveMovieBackgroundBtn">
                        <i class="fa fa-check"></i> 保存
                    </button>
                
                    <input type="file" id="movieBackgroundFile" accept="image/*" style="display: none;">
                </div>
                
                
                <div class="form-group">
                    <div class="preview-img-container" style="display: inline-block; width: 50px; height: 40px; border: 1px solid #444; border-radius: 4px; margin-right: 8px; overflow: hidden; vertical-align: middle; position: relative; cursor: pointer;">
                        <img id="movieLogoPreview" src="" alt="预览" style="width: 100%; height: 100%; object-fit: cover;">
                    </div>
                    <label for="movieLogo" style="vertical-align: middle;">影视LOGO：</label>
                    <div class="input-container">
                        <input type="text" id="movieLogo" placeholder="请输入LOGO图片URL">
                    </div>
                    <button type="button" class="btn btn-secondary" id="defaultMovieLogoBtn">
                        <i class="fa fa-refresh"></i> 默认
                    </button>
                    <button type="button" class="btn btn-secondary" id="uploadMovieLogoBtn">
                        <i class="fa fa-upload"></i> 上传
                    </button>
                    <button type="button" class="btn btn-primary" id="saveMovieLogoBtn">
                        <i class="fa fa-check"></i> 保存
                    </button>
                
                    <input type="file" id="movieLogoFile" accept="image/*" style="display: none;">
                </div>
                
                
                <div class="form-group">
                    <div class="preview-img-container" style="display: inline-block; width: 50px; height: 40px; border: 1px solid #444; border-radius: 4px; margin-right: 8px; overflow: hidden; vertical-align: middle; position: relative; cursor: pointer;">
                        <img id="movieFaviconPreview" src="" alt="预览" style="width: 100%; height: 100%; object-fit: cover;">
                    </div>
                    <label for="movieFavicon" style="vertical-align: middle;">影视网页favicon图标：</label>
                    <div class="input-container">
                        <input type="text" id="movieFavicon" placeholder="请输入favicon图标URL">
                    </div>
                    <button type="button" class="btn btn-secondary" id="defaultMovieFaviconBtn">
                        <i class="fa fa-refresh"></i> 默认
                    </button>
                    <button type="button" class="btn btn-secondary" id="uploadMovieFaviconBtn">
                        <i class="fa fa-upload"></i> 上传
                    </button>
                    <button type="button" class="btn btn-primary" id="saveMovieFaviconBtn">
                        <i class="fa fa-check"></i> 保存
                    </button>
                
                    <input type="file" id="movieFaviconFile" accept="image/x-icon,.ico,.png,.jpg" style="display: none;">
                </div>
                </form>
                </div>
        
        
        <div id="overlay" class="overlay"></div>
        
        
        <div id="statusMessage" class="status-message"></div>
    </main>

    <script>function uploadFile(e,o,n){const t=document.getElementById(e);const a=t.files[0];if(!a){showStatusMessage("error","请选择文件");return}showStatusMessage("info","文件上传中...",true);const s=new FormData;s.append("file",a);const i=new XMLHttpRequest;i.onload=function(){if(i.status===200){try{const e=JSON.parse(i.responseText);if(e.success){const t=document.getElementById(n);t.value=e.path;if(n==="movieBackground")updatePreview(e.path,"movieBackgroundPreview");else if(n==="movieLogo")updatePreview(e.path,"movieLogoPreview");else if(n==="movieFavicon")updatePreview(e.path,"movieFaviconPreview");else if(n==="loginBackground")updatePreview(e.path,"loginBackgroundPreview");else if(n==="loginLogo")updatePreview(e.path,"loginLogoPreview");else if(n==="deviceLogo")updatePreview(e.path,"deviceLogoPreview");else if(n==="webFavicon")updatePreview(e.path,"webFaviconPreview");else if(n==="desktopWallpaper")updatePreview(e.path,"desktopWallpaperPreview");else if(n==="sharePcLogo"||n==="shareMbLogo")updateSharePreview(n);saveToJson(o,e.path).then(()=>{showStatusMessage("success","文件上传成功并已自动保存到设置")}).catch(()=>{showStatusMessage("success","文件上传成功，但保存设置失败，请手动点击保存")})}else{showStatusMessage("error",e.error||"文件上传失败")}}catch(e){showStatusMessage("error","文件上传响应解析失败")}}else{showStatusMessage("error",`文件上传失败 (HTTP ${i.status})`)}};i.onerror=function(){console.error("上传错误");showStatusMessage("error","网络错误，文件上传失败")};i.open("POST",`/api/upload/${o}`);i.setRequestHeader("x-auth-token",localStorage.getItem("authToken"));i.send(s)}function checkLoginStatus(){const e=localStorage.getItem("authToken");const t=localStorage.getItem("loginTimestamp");const o=30*60*1e3;const n=(new Date).getTime();if(!e||!t||n-parseInt(t)>o){localStorage.removeItem("authToken");localStorage.removeItem("loginTimestamp");localStorage.removeItem("isLoggedIn");localStorage.setItem("returnUrl",window.location.href);window.location.href="login.html";return false}localStorage.setItem("authToken","authenticated");localStorage.setItem("loginTimestamp",n.toString());return true}document.addEventListener("DOMContentLoaded",function(){if(!checkLoginStatus()){return}const n=window.fetch;window.fetch=function(e,t={}){if(e.startsWith("/api/")){const o=localStorage.getItem("authToken");if(o){if(!t.headers){t.headers={}}t.headers["X-Auth-Token"]=o}}return n(e,t).then(e=>{if(e.status===401){localStorage.removeItem("authToken");window.location.href="login.html"}return e})};initializeFormEvents();loadCurrentSettings()});function initializeFormEvents(){initializeOpacityDropdown();initFnStyleEvents();initMovieStyleEvents();initBeianEvents()}function initFnStyleEvents(){document.getElementById("saveTitleBtn").addEventListener("click",function(){saveAppTitle()});document.getElementById("uploadFaviconBtn").addEventListener("click",function(){document.getElementById("faviconFile").click()});document.getElementById("faviconFile").addEventListener("change",function(){uploadFile("faviconFile","webFavicon","webFavicon")});document.getElementById("saveFaviconBtn").addEventListener("click",function(){saveWebFavicon()});document.getElementById("uploadBackgroundBtn").addEventListener("click",function(){document.getElementById("backgroundFile").click()});document.getElementById("backgroundFile").addEventListener("change",function(){uploadFile("backgroundFile","loginBackground","loginBackground")});document.getElementById("saveBackgroundBtn").addEventListener("click",function(){saveLoginBackground()});document.getElementById("uploadLogoBtn").addEventListener("click",function(){document.getElementById("logoFile").click()});document.getElementById("logoFile").addEventListener("change",function(){uploadFile("logoFile","loginLogo","loginLogo")});document.getElementById("saveLogoBtn").addEventListener("click",function(){saveLoginLogo()});document.getElementById("uploadDeviceLogoBtn").addEventListener("click",function(){document.getElementById("deviceLogoFile").click()});document.getElementById("deviceLogoFile").addEventListener("change",function(){uploadFile("deviceLogoFile","deviceLogo","deviceLogo")});document.getElementById("saveDeviceLogoBtn").addEventListener("click",function(){saveDeviceLogo()});document.getElementById("saveOpacityBtn").addEventListener("click",function(){saveLoginOpacity()});document.getElementById("defaultTitleBtn").addEventListener("click",function(){document.getElementById("appTitle").value="飞牛 fnOS"});document.getElementById("defaultBackgroundBtn").addEventListener("click",function(){document.getElementById("loginBackground").value="/static/bg/wallpaper-1.webp"});document.getElementById("defaultLogoBtn").addEventListener("click",function(){document.getElementById("loginLogo").value="data:image/svg+xml,%3csvg%20width='80'%20height='62'%20viewBox='0%200%2080%2062'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M71.7976%200C71.7976%200%2075.7039%207.62011%2073.9143%2012.0592C72.9983%2014.3316%2070.3423%2017.0402%2067.4317%2017.0402H29.3047C23.8248%2017.0402%2019.3824%2021.4416%2019.3824%2026.871V54.5285C19.3824%2058.6549%2022.7586%2062%2026.9234%2062H37.302C40.0054%2062%2042.197%2059.8286%2042.197%2057.1501V50.7825H49.3583C52.0618%2050.7825%2054.2534%2048.6111%2054.2534%2045.9326V40.3721C60.4044%2040.3721%2066.2097%2037.5272%2069.9786%2032.666L70.3048%2032.2452H50.9459C48.2425%2032.2452%2046.0509%2034.4166%2046.0509%2037.0951V41.5972C46.0509%2042.1818%2045.577%2042.6556%2044.9925%2042.6556H38.8896C36.1861%2042.6556%2033.9945%2044.827%2033.9945%2047.5055V51.9695C33.9945%2053.0209%2033.1422%2053.8731%2032.0909%2053.8731H29.4885C28.4372%2053.8731%2027.5849%2053.0209%2027.5849%2051.9695V26.871C27.5849%2025.9299%2028.3549%2025.167%2029.3047%2025.167H70.0777C75.5577%2025.167%2080.0001%2020.7656%2080.0001%2015.3362C80.0001%2010.4052%2077.9446%205.69738%2074.3281%202.34542L71.7976%200ZM6.08573%2012.0965C4.29615%207.65745%208.2025%200.0373473%208.2025%200.0373473L5.67199%202.38276C2.05551%205.73472%200%2010.4425%200%2015.3735C0%2020.8029%204.4424%2025.2044%209.92237%2025.2044H12.3468C12.3657%2022.0411%2013.5657%2019.1578%2015.528%2016.9731C9.05215%2016.4551%206.89556%2014.1053%206.08573%2012.0965Z'%20fill='white'/%3e%3c/svg%3e"});document.getElementById("defaultDeviceLogoBtn").addEventListener("click",function(){document.getElementById("deviceLogo").value="data:image/png;base64,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"});document.getElementById("defaultFaviconBtn").addEventListener("click",function(){document.getElementById("webFavicon").value="/favicon.ico"});document.getElementById("uploadWallpaperBtn").addEventListener("click",function(){document.getElementById("wallpaperFile").click()});document.getElementById("wallpaperFile").addEventListener("change",function(){uploadFile("wallpaperFile","desktopWallpaper","desktopWallpaper")});document.getElementById("saveWallpaperBtn").addEventListener("click",function(){saveDesktopWallpaper()});document.getElementById("defaultWallpaperBtn").addEventListener("click",function(){document.getElementById("desktopWallpaper").value="/static/bg/wallpaper-1.webp"})}function initMovieStyleEvents(){document.getElementById("saveMovieTitleBtn").addEventListener("click",function(){saveMovieTitle()});document.getElementById("uploadMovieFaviconBtn").addEventListener("click",function(){document.getElementById("movieFaviconFile").click()});document.getElementById("movieFaviconFile").addEventListener("change",function(){uploadFile("movieFaviconFile","movieFavicon","movieFavicon")});document.getElementById("saveMovieFaviconBtn").addEventListener("click",function(){saveMovieFavicon()});document.getElementById("uploadMovieBackgroundBtn").addEventListener("click",function(){document.getElementById("movieBackgroundFile").click()});document.getElementById("movieBackgroundFile").addEventListener("change",function(){uploadFile("movieBackgroundFile","movieBackground","movieBackground")});document.getElementById("saveMovieBackgroundBtn").addEventListener("click",function(){saveMovieBackground()});document.getElementById("uploadMovieLogoBtn").addEventListener("click",function(){document.getElementById("movieLogoFile").click()});document.getElementById("movieLogoFile").addEventListener("change",function(){uploadFile("movieLogoFile","movieLogo","movieLogo")});document.getElementById("saveMovieLogoBtn").addEventListener("click",function(){saveMovieLogo()});document.getElementById("saveMovieOpacityBtn").addEventListener("click",function(){saveMovieOpacity()});document.getElementById("defaultMovieBackgroundBtn").addEventListener("click",function(){fetch("/api/getWebpFiles").then(e=>e.json()).then(e=>{if(e.files&&e.files.length>0){const t="/v/assets/"+e.files[0];document.getElementById("movieBackground").value=t}else{console.error("未找到webp文件");alert("未找到可用的webp背景文件")}}).catch(e=>{console.error("获取webp文件失败:",e);alert("获取背景文件失败")})});document.getElementById("defaultMovieLogoBtn").addEventListener("click",function(){const e="/v/static/img/logo.png";document.getElementById("movieLogo").value=e});document.getElementById("defaultMovieFaviconBtn").addEventListener("click",function(){const e="/v/static/favicon.ico";document.getElementById("movieFavicon").value=e});document.getElementById("defaultMovieTitleBtn").addEventListener("click",function(){document.getElementById("movieTitle").value="飞牛影视"})}function initBeianEvents(){document.getElementById("saveBeianBtn").addEventListener("click",function(){saveBeianInfo()});loadBeianInfo()}function loadBeianInfo(){try{fetch("/api/fnstyle.json").then(e=>e.json()).then(e=>{document.getElementById("beianToggle").value=e.beian!==undefined?e.beian.toString():"0";if(e.beian_Name)document.getElementById("beianName").value=e.beian_Name;if(e.beian_URL)document.getElementById("beianUrl").value=e.beian_URL;if(e.beian_NUM)document.getElementById("beianNum").value=e.beian_NUM}).catch(e=>{console.error("加载备案信息失败:",e);document.getElementById("beianToggle").value="0"})}catch(e){console.error("加载备案信息失败:",e);document.getElementById("beianToggle").value="0"}}function saveBeianInfo(){const t=parseInt(document.getElementById("beianToggle").value);const e=document.getElementById("beianName").value.trim();const o=document.getElementById("beianUrl").value.trim();const n=document.getElementById("beianNum").value.trim();showStatusMessage("info","保存中...");const a={beian:t,beian_Name:e,beian_URL:o,beian_NUM:n};fetch("/api/fnstyle.json",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(e=>{if(!e.ok){throw new Error("网络响应错误")}return e.json()}).then(e=>{showStatusMessage("success","备案信息已保存");console.log("备案信息状态:",t===1?"开启(1)":"关闭(0)")}).catch(e=>{console.error("保存备案信息失败:",e);showStatusMessage("error","保存备案信息失败")})}function updateBeianToggle(){const e=document.getElementById("beianToggle").value;console.log("备案信息状态:",e==="1"?"开启(1)":"关闭(0)")}function loadCurrentSettings(){try{fetch("api/fnstyle.json").then(e=>{if(!e.ok){throw new Error("网络响应错误")}return e.json()}).then(e=>{if(e.appTitle)document.getElementById("appTitle").value=e.appTitle;if(e.webFavicon)document.getElementById("webFavicon").value=e.webFavicon;if(e.loginBackground)document.getElementById("loginBackground").value=e.loginBackground;if(e.loginLogo)document.getElementById("loginLogo").value=e.loginLogo;if(e.deviceLogo)document.getElementById("deviceLogo").value=e.deviceLogo;if(e.desktopWallpaper)document.getElementById("desktopWallpaper").value=e.desktopWallpaper;if(e.loginOpacity)document.getElementById("loginOpacity").value=e.loginOpacity;else document.getElementById("loginOpacity").value="30";if(e.movieTitle)document.getElementById("movieTitle").value=e.movieTitle;if(e.movieFavicon)document.getElementById("movieFavicon").value=e.movieFavicon;if(e.movieBackground)document.getElementById("movieBackground").value=e.movieBackground;if(e.movieLogo)document.getElementById("movieLogo").value=e.movieLogo;if(e.movieOpacity)document.getElementById("movieOpacity").value=e.movieOpacity;else document.getElementById("movieOpacity").value="30";updatePreview(e.loginBackground||"","loginBackgroundPreview");updatePreview(e.loginLogo||"","loginLogoPreview");updatePreview(e.deviceLogo||"","deviceLogoPreview");updatePreview(e.webFavicon||"","webFaviconPreview");updatePreview(e.desktopWallpaper||"","desktopWallpaperPreview");updatePreview(e.movieBackground||"","movieBackgroundPreview");updatePreview(e.movieLogo||"","movieLogoPreview");updatePreview(e.movieFavicon||"","movieFaviconPreview");showStatusMessage("info","主题配置加载完成")}).catch(e=>{console.error("加载设置失败:",e);showStatusMessage("error","加载设置失败")})}catch(e){console.error("加载设置失败:",e);showStatusMessage("error","加载设置失败")}}function saveToJson(t,o){const e={[t]:o};return fetch("api/fnstyle.json",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>{if(!e.ok){throw new Error("网络响应错误")}return e.json()}).then(e=>{console.log(`设置已直接保存到fnstyle.json文件: ${t} = ${o}`);return e.data}).catch(e=>{console.error("保存设置失败:",e);throw new Error("保存设置失败")})}function saveDesktopWallpaper(){const t=document.getElementById("desktopWallpaper").value.trim();if(!t){showStatusMessage("error","请输入壁纸图片URL或选择文件");return}showStatusMessage("info","保存中...",true,50);saveToJson("desktopWallpaper",t).then(()=>{const e=document.getElementById("wallpaperFile");if(e.files&&e.files[0]){console.log("需要上传壁纸文件:",e.files[0])}showStatusMessage("success","桌面默认壁纸设置已保存");updatePreview(t,"desktopWallpaperPreview")}).catch(e=>{console.error("保存壁纸设置失败:",e);showStatusMessage("error","保存壁纸设置失败")})}function saveLoginBackground(){const t=document.getElementById("loginBackground").value.trim();if(!t){showStatusMessage("error","请输入背景图片URL或选择文件");return}showStatusMessage("info","保存中...",true,50);saveToJson("loginBackground",t).then(()=>{const e=document.getElementById("backgroundFile");if(e.files&&e.files[0]){console.log("需要上传文件:",e.files[0])}showStatusMessage("success","登录背景设置已保存");updatePreview(t,"loginBackgroundPreview")}).catch(e=>{console.error("保存设置失败:",e);showStatusMessage("error","保存设置失败")})}function saveLoginLogo(){const t=document.getElementById("loginLogo").value.trim();if(!t){showStatusMessage("error","请输入LOGO图片URL或选择文件");return}showStatusMessage("info","保存中...",true,50);saveToJson("loginLogo",t).then(()=>{const e=document.getElementById("logoFile");if(e.files&&e.files[0]){console.log("需要上传LOGO文件:",e.files[0])}showStatusMessage("success","登录LOGO设置已保存");updatePreview(t,"loginLogoPreview")}).catch(e=>{console.error("保存LOGO设置失败:",e);showStatusMessage("error","保存LOGO设置失败")})}function saveDeviceLogo(){const t=document.getElementById("deviceLogo").value.trim();if(!t){showStatusMessage("error","请输入设备LOGO图片URL或选择文件");return}showStatusMessage("info","保存中...",true,50);saveToJson("deviceLogo",t).then(()=>{const e=document.getElementById("deviceLogoFile");if(e.files&&e.files[0]){console.log("需要上传设备LOGO文件:",e.files[0])}showStatusMessage("success","设备LOGO设置已保存");updatePreview(t,"deviceLogoPreview")}).catch(e=>{console.error("保存设备LOGO设置失败:",e);showStatusMessage("error","保存设备LOGO设置失败")})}function saveAppTitle(){const e=document.getElementById("appTitle").value.trim();if(!e){showStatusMessage("error","请输入飞牛标题");return}showStatusMessage("info","保存中...",true,50);saveToJson("appTitle",e).then(()=>{showStatusMessage("success","飞牛标题设置已保存")}).catch(e=>{console.error("保存标题设置失败:",e);showStatusMessage("error","保存标题设置失败")})}function saveWebFavicon(){const t=document.getElementById("webFavicon").value.trim();if(!t){showStatusMessage("error","请输入favicon图标URL或选择文件");return}showStatusMessage("info","保存中...",true,50);saveToJson("webFavicon",t).then(()=>{const e=document.getElementById("faviconFile");if(e.files&&e.files[0]){console.log("需要上传favicon文件:",e.files[0])}showStatusMessage("success","网页favicon图标设置已保存");updatePreview(t,"webFaviconPreview")}).catch(e=>{console.error("保存favicon设置失败:",e);showStatusMessage("error","保存favicon设置失败")})}function saveLoginOpacity(){const e=document.getElementById("loginOpacity").value;const t=parseFloat(e);if(isNaN(t)||t<0||t>30){showStatusMessage("error","无效的透明度值");return}showStatusMessage("info","保存中...",true,50);saveToJson("loginOpacity",t.toString()).then(()=>{showStatusMessage("success","登录框透明度设置已保存")}).catch(e=>{console.error("保存透明度设置失败:",e);showStatusMessage("error","保存透明度设置失败")})}function saveMovieTitle(){const e=document.getElementById("movieTitle").value.trim();if(!e){showStatusMessage("error","请输入影视标题");return}showStatusMessage("info","保存中...",true,50);saveToJson("movieTitle",e).then(()=>{fetch("/api/update-trim-media-title",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({movieTitle:e})}).then(e=>e.json()).then(e=>{if(e.success||!e.error){showStatusMessage("success","影视标题设置已保存")}else{console.error("更新trim.mediastaticindex.html失败:",e.error);showStatusMessage("warning","影视标题设置已保存，但更新trim.mediastaticindex.html失败")}}).catch(e=>{console.error("更新trim.mediastaticindex.html失败:",e);showStatusMessage("warning","影视标题设置已保存，但更新trim.mediastaticindex.html失败")})}).catch(e=>{console.error("保存影视标题设置失败:",e);showStatusMessage("error","保存影视标题设置失败")})}function saveMovieFavicon(){const t=document.getElementById("movieFavicon").value.trim();if(!t){showStatusMessage("error","请输入favicon图标URL或选择文件");return}showStatusMessage("info","保存中...",true,50);saveToJson("movieFavicon",t).then(()=>{const e=document.getElementById("movieFaviconFile");if(e.files&&e.files[0]){console.log("需要上传影视favicon文件:",e.files[0])}showStatusMessage("success","影视网页favicon图标设置已保存");updatePreview(t,"movieFaviconPreview")}).catch(e=>{console.error("保存影视favicon设置失败:",e);showStatusMessage("error","保存影视favicon设置失败")})}function saveMovieBackground(){const t=document.getElementById("movieBackground").value.trim();if(!t){showStatusMessage("error","请输入背景图片URL或选择文件");return}showStatusMessage("info","保存中...",true,50);saveToJson("movieBackground",t).then(()=>{const e=document.getElementById("movieBackgroundFile");if(e.files&&e.files[0]){console.log("需要上传影视背景文件:",e.files[0])}showStatusMessage("success","影视背景设置已保存");updatePreview(t,"movieBackgroundPreview")}).catch(e=>{console.error("保存影视背景设置失败:",e);showStatusMessage("error","保存影视背景设置失败")})}function saveMovieLogo(){const t=document.getElementById("movieLogo").value.trim();if(!t){showStatusMessage("error","请输入LOGO图片URL或选择文件");return}showStatusMessage("info","保存中...",true,50);saveToJson("movieLogo",t).then(()=>{const e=document.getElementById("movieLogoFile");if(e.files&&e.files[0]){console.log("需要上传影视LOGO文件:",e.files[0])}showStatusMessage("success","影视LOGO设置已保存");updatePreview(t,"movieLogoPreview")}).catch(e=>{console.error("保存影视LOGO设置失败:",e);showStatusMessage("error","保存影视LOGO设置失败")})}function saveMovieOpacity(){const e=document.getElementById("movieOpacity").value;const t=parseFloat(e);if(isNaN(t)||t<0||t>30){showStatusMessage("error","无效的透明度值");return}showStatusMessage("info","保存中...",true,50);saveToJson("movieOpacity",t.toString()).then(()=>{showStatusMessage("success","内容透明度设置已保存")}).catch(e=>{console.error("保存透明度设置失败:",e);showStatusMessage("error","保存透明度设置失败")})}function showStatusMessage(e,t,o=false){const n=document.getElementById("statusMessage");const a=document.getElementById("overlay");let s=`<i class="fa fa-${e==="success"?"check-circle":e==="error"?"exclamation-circle":"info-circle"}"></i> ${t}`;if(o){s+=`
                    <div class="progress-container">
                        <div class="progress-bar looping"></div>
                    </div>
                `}n.innerHTML=s;n.classList.remove("success","error","info");n.classList.add(e);n.style.display="block";if(o||e==="info"){a.style.display="block"}if(e!=="info"||!o){a.style.display="none";setTimeout(()=>{n.style.display="none"},3e3)}}function hideStatusMessage(){const e=document.getElementById("statusMessage");const t=document.getElementById("overlay");e.style.display="none";t.style.display="none"}function initializeOpacityDropdown(){initializeOpacitySelect("loginOpacity","saveOpacityBtn","loginOpacity","登录框透明度设置已保存","保存透明度设置失败");initializeOpacitySelect("movieOpacity","saveMovieOpacityBtn","movieOpacity","内容透明度设置已保存","保存透明度设置失败")}function initializeOpacitySelect(e,n,a,s,i){const t=document.getElementById(e);t.innerHTML="";for(let e=0;e<=30;e++){const o=document.createElement("option");o.value=e;o.textContent=e===0?"全透明":e===30?"最模糊":e;t.appendChild(o)}t.addEventListener("change",function(){const e=this.value;const t=document.getElementById(n);const o=t.innerHTML;t.disabled=true;t.innerHTML='<i class="fa fa-spinner fa-spin"></i> 保存中...';saveToJson(a,e).then(()=>{showStatusMessage("success",s)}).catch(e=>{console.error(i+":",e);showStatusMessage("error",i)}).finally(()=>{t.innerHTML='<i class="fa fa-check"></i> 保存';t.disabled=false})})}function loadThemes(){const s=document.getElementById("themeGrid");const e={1:"linear-gradient(45deg, #ff0055, #00ffff)",2:"linear-gradient(45deg, #00a8ff, #00d2d3)",3:"linear-gradient(45deg, #9c27b0, #673ab7)",4:"linear-gradient(45deg, #4caf50, #8bc34a)",5:"linear-gradient(45deg, #ff9800, #ff5722)",6:"linear-gradient(45deg, #1976d2, #00bcd4)"};fetch("deskdata/theme.json").then(e=>{if(!e.ok){throw new Error("主题数据加载失败")}return e.json()}).then(e=>{s.innerHTML="";e.sort((e,t)=>t.ID-e.ID);e.forEach(e=>{const t=document.createElement("div");t.className="theme-card";t.dataset.themeId=e.ID;const o=document.createElement("div");o.className="theme-thumbnail";o.style.backgroundImage=`url(${e.t0.replace(/[`']/g,"")})`;const n=document.createElement("div");n.className="theme-overlay-image";n.style.backgroundImage=`url(${e.t1.replace(/[`']/g,"")})`;o.appendChild(n);const a=document.createElement("button");a.className="btn btn-primary theme-select-btn";a.innerHTML=`<div class="theme-btn-content">
                            <span class="theme-btn-title">${e.标题}</span>
                            <span class="theme-btn-action"><i class="fa fa-check"></i> 选择</span>
                        </div>`;t.appendChild(o);t.appendChild(a);s.appendChild(t)});initThemeButtons()}).catch(e=>{console.error("加载主题失败:",e);s.innerHTML=`
                        <div class="theme-error">
                            <i class="fa fa-exclamation-triangle text-danger"></i>
                            <p>暂无任何主题数据...</p>
                        </div>
                    `})}function showNotification(e,t="info"){let o=document.getElementById("notification-container");if(!o){o=document.createElement("div");o.id="notification-container";o.style.position="fixed";o.style.top="20px";o.style.right="20px";o.style.zIndex="9999";o.style.maxWidth="300px";document.body.appendChild(o)}const n=document.createElement("div");n.className="alert";n.style.padding="12px 16px";n.style.marginBottom="10px";n.style.borderRadius="4px";n.style.boxShadow="0 2px 10px rgba(0, 0, 0, 0.15)";n.style.transition="all 0.3s ease";n.style.opacity="0";n.style.transform="translateY(-10px)";switch(t){case"success":n.style.backgroundColor="#d4edda";n.style.color="#155724";n.style.borderLeft="4px solid #28a745";break;case"error":n.style.backgroundColor="#f8d7da";n.style.color="#721c24";n.style.borderLeft="4px solid #dc3545";break;case"warning":n.style.backgroundColor="#fff3cd";n.style.color="#856404";n.style.borderLeft="4px solid #ffc107";break;default:n.style.backgroundColor="#d1ecf1";n.style.color="#0c5460";n.style.borderLeft="4px solid #17a2b8"}n.textContent=e;o.appendChild(n);setTimeout(()=>{n.style.opacity="1";n.style.transform="translateY(0)"},10);setTimeout(()=>{n.style.opacity="0";n.style.transform="translateY(-10px)";setTimeout(()=>{if(o.contains(n)){o.removeChild(n)}},300)},3e3)}function updateThemeFile(){const e="https://fndesk.imcq.top/?url=theme&at=FnAPP";const t=document.getElementById("updateThemeBtn");const o=t.innerHTML;try{new URL(e)}catch(e){showNotification("主题配置URL格式无效，请检查代码中的THEME_CONFIG_URL变量","error");return}t.innerHTML='<i class="fa fa-circle-o-notch fa-spin"></i> 下载中...';t.disabled=true;fetch("/api/update-theme-file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({themeUrl:e})}).then(e=>{if(!e.ok){throw new Error(`服务器响应错误: ${e.status}`)}return e.json()}).then(e=>{if(e.success){showNotification("主题配置文件更新成功！","success");setTimeout(()=>{loadThemes()},500)}else{showNotification(e.message||"更新失败","error")}}).catch(e=>{console.error("更新主题文件失败:",e);showNotification("下载更新失败: "+(e.message||"未知错误"),"error")}).finally(()=>{t.innerHTML=o;t.disabled=false})}document.addEventListener("DOMContentLoaded",function(){if(typeof loadSavedSettings==="function"){loadSavedSettings()}if(typeof initializeOpacityDropdown==="function"){initializeOpacityDropdown()}loadThemes();const e=document.getElementById("updateThemeBtn");if(e){e.addEventListener("click",updateThemeFile)}initializeShareSettings();bindShareSettingEvents()});function initializeShareSettings(){fetch("/api/fnstyle.json").then(e=>e.json()).then(e=>{const t={sharePcLogo:"data:image/png;base64,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",shareMbLogo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABHCAYAAAC6cjEhAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAUDSURBVHgB7ZxPaBxVHMe/M8RaJcQ1iEgTcKb14D+wQgte1BX8cxG6WA/ipdmjF02TKh4EEXoQaYP1oiebXkTBYAKemoOrXiwKBtT2YpwpJMVDSZe0tGGb7vR9p7vbmclMMm92d+bt7nxg2cnMbObt9/3+vfdmB8gJRYt74uOTllHTURKfeNEB9otdBnoBDUtwUNUcLNR3Yd7+1LTjfWwHHjtmFW85+FhsFtEfVHQHZ5ZnzNntTooUxvjQMrSbOI3+ESRIxbkH5SgL0sN27pu+eESI8if6VxRS5Hc0pq1S2MEtwuydvvheHfVZsVlA/1MQLvPD3ilrMnjA50pUjydiANGhTyyffPRM8++WMI2YQvcZBEsJoypizrPNmNNypUagHVRRSKGhgYsrjDFlTaC/A21cioYoT7jhCqPpOIIcF+1OzQatEVss5LS49xZMXa+hhBwftSGUdEfHIeT4cOooMsYMciYKR8Mzuhh57kdOEENHTiiJhRl/cAjP7dsNVWH7+EpKImF4wc/eegi/LW9AVVaubOKriYfx5J5dSIK0MBTlm3cewaq4sOqc+2/DFSeJ5UgL8+5rBYyPDmHxr+tQnfOXam5bad2ySAnDmPLmgWF3e6UXLObfO67OdsvGQylh3jg43Npev1FHL3H4wLDU+VLCvPrU/eglRu67+/VeeVqu7bGFYXT3XujwQbkeyAKvGGy7TIaKLYxXFFJ+fiRxKkwDZiK2MbgvLrGFGRv1/1MK9ePUHjfiqyYQAy1LimBnyhBbwgurtdD9zFJ8MRif/ec6ji+shQZmNvZlYdoP7O7uKIQdGJWB1jfiJ4zYwrAm4BeO6gXun/1lfYsoNF+3Ah3L1qpW1jalKnWp7vvibDXyGC9K8bxQFLpb1qKQ7doehpQwX/+6ju//uBZ6bPHvrZVwu37eKbZrdxTSg4gPvr2MVWGWLJjGPQH5QsBa6Ofjo8lHt52Abn1KWMppIYwsiVrOi/HFL9/MVvRhL0+EZCqec2pRzqSTws47LxKGTMD10laXusFsOfxYmAvNCXOe+13OpLMin8GLIBcmgmyjYwxGREHIIC6T3Zo1VzsoLQwr6o8OjUqJwgD/+swltIuyrsTiMIkob3/5f+JM5EVZi5F1HxZwx+fXOiIKUVaYsZjFIUsGlvudXrFQPvh6YUBlYHWLN/HOartbSzg9JQzHY+9/dxlpkLkwnOTiTFvQdbKe/MpUmObinQoj8CCZtqj8woiSopBMWyUryrkU18p7ZqyUZLKpHZTLSpxUCs4GsqJNe0k4VWGCmSdsMouTSyrcXpKqMBwUNpc2OGpWNfCSrgkTNexv5y6nNOlal80lDJRXFbmLomvCNGfoZT8TXJvKiq7aNYWhBUyIkn+npRSKwuVdVW5I0sxpy0EKBG8j8UJRmJI7NZfSCVKLhKq4SFzYhTZy/GhY0jVgCTl+HFT5W4KfkeND07Cg1+uYR46P+ibmdftz0xY+VUFOkwo1cfOnyNefIMeFz33ge+t31+Yx6yehUBGDjPAc64T5EjdbFZezibJ4S+fmFTWpNjRwaQlDv3IcHMWAIsJJ2Y23DXw1uj1jzg6iOI6Go/ZJ05edQ58f03j4xSA80qBKQ7BDHrIT/WCdScvQhoQ4/RqQRaBlTPG6j//wDvC5D+4jDvpFIAoiyhP7hFnZ/rSY0IJ0HaXGD9gLPfSzZNsdD4qhD6v8KAsJchtpusc7b1JbeQAAAABJRU5ErkJggg==",shareMbTitle:"飞牛 fnOS",shareMbUrl:"https://www.fnnas.com/",shareMbDesc:"正版免费 兼容x86硬件 智能影视刮削 本地AI相册"};document.getElementById("sharePcLogo").value=e.sharePcLogo||t.sharePcLogo;document.getElementById("sharePcLogoPreview").src=e.sharePcLogo||t.sharePcLogo;document.getElementById("shareMbLogo").value=e.shareMbLogo||t.shareMbLogo;document.getElementById("shareMbLogoPreview").src=e.shareMbLogo||t.shareMbLogo;document.getElementById("shareMbTitle").value=e.shareMbTitle||t.shareMbTitle;document.getElementById("shareMbUrl").value=e.shareMbUrl||t.shareMbUrl;document.getElementById("shareMbDesc").value=e.shareMbDesc||t.shareMbDesc}).catch(e=>{console.error("加载外链分享设置失败:",e);showStatusMessage("error","加载外链分享设置失败")})}function bindShareSettingEvents(){document.getElementById("defaultSharePcLogoBtn").addEventListener("click",()=>setDefaultShareValue("sharePcLogo"));document.getElementById("uploadSharePcLogoBtn").addEventListener("click",()=>document.getElementById("sharePcLogoFile").click());document.getElementById("saveSharePcLogoBtn").addEventListener("click",()=>saveShareValue("sharePcLogo"));document.getElementById("sharePcLogoFile").addEventListener("change",e=>uploadShareImage(e,"sharePcLogo"));document.getElementById("sharePcLogoPreview").parentElement.addEventListener("click",()=>document.getElementById("sharePcLogoFile").click());document.getElementById("defaultShareMbLogoBtn").addEventListener("click",()=>setDefaultShareValue("shareMbLogo"));document.getElementById("uploadShareMbLogoBtn").addEventListener("click",()=>document.getElementById("shareMbLogoFile").click());document.getElementById("saveShareMbLogoBtn").addEventListener("click",()=>saveShareValue("shareMbLogo"));document.getElementById("shareMbLogoFile").addEventListener("change",e=>uploadShareImage(e,"shareMbLogo"));document.getElementById("shareMbLogoPreview").parentElement.addEventListener("click",()=>document.getElementById("shareMbLogoFile").click());document.getElementById("defaultShareMbTitleBtn").addEventListener("click",()=>setDefaultShareValue("shareMbTitle"));document.getElementById("saveShareMbTitleBtn").addEventListener("click",()=>saveShareValue("shareMbTitle"));document.getElementById("defaultShareMbUrlBtn").addEventListener("click",()=>setDefaultShareValue("shareMbUrl"));document.getElementById("saveShareMbUrlBtn").addEventListener("click",()=>saveShareValue("shareMbUrl"));document.getElementById("defaultShareMbDescBtn").addEventListener("click",()=>setDefaultShareValue("shareMbDesc"));document.getElementById("saveShareMbDescBtn").addEventListener("click",()=>saveShareValue("shareMbDesc"))}function setDefaultShareValue(e){const t={sharePcLogo:"data:image/png;base64,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",shareMbLogo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABHCAYAAAC6cjEhAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAUDSURBVHgB7ZxPaBxVHMe/M8RaJcQ1iEgTcKb14D+wQgte1BX8cxG6WA/ipdmjF02TKh4EEXoQaYP1oiebXkTBYAKemoOrXiwKBtT2YpwpJMVDSZe0tGGb7vR9p7vbmclMMm92d+bt7nxg2cnMbObt9/3+vfdmB8gJRYt74uOTllHTURKfeNEB9otdBnoBDUtwUNUcLNR3Yd7+1LTjfWwHHjtmFW85+FhsFtEfVHQHZ5ZnzNntTooUxvjQMrSbOI3+ESRIxbkH5SgL0sN27pu+eESI8if6VxRS5Hc0pq1S2MEtwuydvvheHfVZsVlA/1MQLvPD3ilrMnjA50pUjydiANGhTyyffPRM8++WMI2YQvcZBEsJoypizrPNmNNypUagHVRRSKGhgYsrjDFlTaC/A21cioYoT7jhCqPpOIIcF+1OzQatEVss5LS49xZMXa+hhBwftSGUdEfHIeT4cOooMsYMciYKR8Mzuhh57kdOEENHTiiJhRl/cAjP7dsNVWH7+EpKImF4wc/eegi/LW9AVVaubOKriYfx5J5dSIK0MBTlm3cewaq4sOqc+2/DFSeJ5UgL8+5rBYyPDmHxr+tQnfOXam5bad2ySAnDmPLmgWF3e6UXLObfO67OdsvGQylh3jg43Npev1FHL3H4wLDU+VLCvPrU/eglRu67+/VeeVqu7bGFYXT3XujwQbkeyAKvGGy7TIaKLYxXFFJ+fiRxKkwDZiK2MbgvLrGFGRv1/1MK9ePUHjfiqyYQAy1LimBnyhBbwgurtdD9zFJ8MRif/ec6ji+shQZmNvZlYdoP7O7uKIQdGJWB1jfiJ4zYwrAm4BeO6gXun/1lfYsoNF+3Ah3L1qpW1jalKnWp7vvibDXyGC9K8bxQFLpb1qKQ7doehpQwX/+6ju//uBZ6bPHvrZVwu37eKbZrdxTSg4gPvr2MVWGWLJjGPQH5QsBa6Ofjo8lHt52Abn1KWMppIYwsiVrOi/HFL9/MVvRhL0+EZCqec2pRzqSTws47LxKGTMD10laXusFsOfxYmAvNCXOe+13OpLMin8GLIBcmgmyjYwxGREHIIC6T3Zo1VzsoLQwr6o8OjUqJwgD/+swltIuyrsTiMIkob3/5f+JM5EVZi5F1HxZwx+fXOiIKUVaYsZjFIUsGlvudXrFQPvh6YUBlYHWLN/HOartbSzg9JQzHY+9/dxlpkLkwnOTiTFvQdbKe/MpUmObinQoj8CCZtqj8woiSopBMWyUryrkU18p7ZqyUZLKpHZTLSpxUCs4GsqJNe0k4VWGCmSdsMouTSyrcXpKqMBwUNpc2OGpWNfCSrgkTNexv5y6nNOlal80lDJRXFbmLomvCNGfoZT8TXJvKiq7aNYWhBUyIkn+npRSKwuVdVW5I0sxpy0EKBG8j8UJRmJI7NZfSCVKLhKq4SFzYhTZy/GhY0jVgCTl+HFT5W4KfkeND07Cg1+uYR46P+ibmdftz0xY+VUFOkwo1cfOnyNefIMeFz33ge+t31+Yx6yehUBGDjPAc64T5EjdbFZezibJ4S+fmFTWpNjRwaQlDv3IcHMWAIsJJ2Y23DXw1uj1jzg6iOI6Go/ZJ05edQ58f03j4xSA80qBKQ7BDHrIT/WCdScvQhoQ4/RqQRaBlTPG6j//wDvC5D+4jDvpFIAoiyhP7hFnZ/rSY0IJ0HaXGD9gLPfSzZNsdD4qhD6v8KAsJchtpusc7b1JbeQAAAABJRU5ErkJggg==",shareMbTitle:"飞牛 fnOS",shareMbUrl:"https://www.fnnas.com/",shareMbDesc:"正版免费 兼容x86硬件 智能影视刮削 本地AI相册"};document.getElementById(e).value=t[e];updateSharePreview(e);saveShareValue(e);showStatusMessage("success",`已重置为默认${getShareFieldLabel(e)}`);saveShareValue(e)}function uploadShareImage(e,t){const o=e.target.id;uploadFile(o,t,t);e.target.value="";setTimeout(()=>{updateSharePreview(t)},500)}function saveShareValue(t){const e=document.getElementById(t).value;if(!e){showStatusMessage("error",`${getShareFieldLabel(t)}不能为空`);return}saveToJson(t,e).then(()=>{showStatusMessage("success",`${getShareFieldLabel(t)}保存成功`);updateSharePreview(t)}).catch(e=>{console.error(`保存${getShareFieldLabel(t)}失败:`,e);showStatusMessage("error",`${getShareFieldLabel(t)}保存失败`)})}function updateSharePreview(e){if(e==="sharePcLogo"||e==="shareMbLogo"){const t=document.getElementById(`${e}Preview`);if(t){const o=document.getElementById(e).value;const n=(new Date).getTime();if(o&&!o.startsWith("data:")){const a=o.includes("?")?"&":"?";t.src=`${o}${a}_t=${n}`}else{t.src=o}t.onload=()=>{t.style.display="block"}}}}function getShareFieldLabel(e){const t={sharePcLogo:"PC Web端LOGO",shareMbLogo:"移动Web端LOGO",shareMbTitle:"移动端标题",shareMbUrl:"移动端跳转链接",shareMbDesc:"移动端描述"};return t[e]||e}</script>
    
    
    <style>
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0rem;
        }
        
        .theme-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 1.5rem;
        }
        
        .theme-card {
            background-color: #0d1b2a;
            border: 1px solid #4a5568;
            border-radius: 0.75rem;
            overflow: hidden;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }
        
        .theme-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 0 15px rgba(124, 58, 237, 0.5), 0 6px 12px rgba(0, 0, 0, 0.3);
            border-color: #8b5cf6;
        }
        
        .theme-thumbnail {
            height: 140px;
            width: 100%;
            background-size: cover;
            background-position: center;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.75rem 0.75rem 0 0;
        }
        
        .theme-thumbnail::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.4);
            z-index: 1;
        }
        
        .theme-overlay-image {
            position: relative;
            width: 60%;
            height: 60%;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            border-radius: 4px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0);
            z-index: 2;
        }
        
        .theme-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin: 0.75rem;
            text-align: center;
        }
        
        .theme-select-btn {
            margin: 0;
            padding: 0.75rem;
            font-size: 0.9rem;
            border-radius: 0 0 0.75rem 0.75rem;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            border: none;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            width: 100%;
            display: block;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .theme-btn-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }
        
        .theme-btn-title {
            font-weight: bold;
            margin-right: 0.5rem;
            flex: 1;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .theme-btn-action {
            white-space: nowrap;
            display: flex;
            align-items: center;
        }
        
        .theme-btn-action i {
            margin-right: 0.25rem;
        }
        
        .theme-select-btn:hover {
            box-shadow: var(--glow-primary);
            transform: scale(1.05);
        }
        
        .theme-loading, .theme-error {
            grid-column: 1 / -1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 3rem;
            color: var(--text-secondary);
        }
        
        .theme-loading i, .theme-error i {
            margin-bottom: 1rem;
        }
    </style>
    <script src="applyTheme.js"></script>
        <footer class="bg-card py-6 border-t">
        <div class="container text-center text-text-secondary" style="display: flex; justify-content: center; align-items: center; flex-direction: column;">
            <p class="mb-1" style="font-size: 12px; margin: 0 auto;">飞牛桌面管理工具 by 米恋泥</p>
            <p style="font-size: 11px; margin: 0 auto;">组织机构 @小宠瞭望塔</p>
        </div>
    </footer>
</body>
</html>